<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Berlin Savers: Your verified, essential guide to the cheapest and highest-value services in Berlin.">
    <title>Berlin Savers: The Essential Guide</title>
    <link rel="canonical" href="https://berlinsavers.com/">
    <meta property="og:title" content="Berlin Savers: The Essential Guide">
    <meta property="og:description" content="Find the cheapest verified services in Berlin across 10 essential categories.">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        'primary': '#FF8C00',
                        'primary-dark': '#CC6F00',
                        'secondary': '#111827',
                        'background': '#F9FAFB',
                        'logo-blue': '#00BFFF',
                        'star-color': '#FFD700',
                    }
                }
            }
        }
    </script>
    <style>
        html { scroll-behavior: smooth; }
        .deal-card-hover { transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .deal-card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        /* Mobile nav button styling with icon color feedback */
        .nav-btn { @apply flex flex-col items-center p-2 text-xs text-gray-500 transition duration-150; position: relative; }
        .nav-btn svg { transition: color .15s ease, transform .15s ease; }
        /* Hover/focus/active: turn icon light blue */
        .nav-btn:hover svg, .nav-btn:focus svg, .nav-btn:active svg { color: #00BFFF; }
        .nav-btn.touch-active svg { color: #00BFFF; transform: scale(1.1); }
        /* Active nav button: persistent light blue icon */
        .nav-btn.active { @apply text-logo-blue font-bold; }
        .nav-btn.active svg { color: #00BFFF; }
        /* Improve touch behavior on iOS/Android */
        .nav-btn { -webkit-tap-highlight-color: transparent; touch-action: manipulation; }
        .deal-description { display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis; }
        .heart { cursor: pointer; font-size: 20px; color: #e5e7eb; transition: transform .12s ease, color .12s ease; }
        .heart.saved { color: #ef4444; transform: scale(1.05); }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-thumb { background-color: #00BFFF; border-radius: 4px; }
        ::-webkit-scrollbar-track { background-color: #f1f1f1; }
    </style>
</head>
<body class="bg-background min-h-screen font-sans text-secondary pb-16 md:pb-0">

<header class="bg-logo-blue text-white p-10 md:p-16 flex flex-col items-center justify-center text-center relative overflow-hidden shadow-xl">
    <div class="relative">
        <h1 class="text-5xl md:text-6xl font-extrabold leading-tight tracking-tight">Berlin Savers</h1>
        <p class="text-xl md:text-2xl mt-3 font-light opacity-95">Your essential guide to the cheapest, verified services in Berlin.</p>
        <a href="#listing/gyms" data-route="listing/gyms" class="mt-6 inline-block bg-primary text-white px-8 py-4 rounded-full font-black text-lg hover:bg-primary-dark transition duration-200 shadow-2xl transform hover:scale-105">SHOW ME THE CHEAPEST DEALS &rarr;</a>
    </div>
</header>

<div class="max-w-6xl mx-auto p-4 md:p-6 flex flex-col md:flex-row gap-6">
    <aside id="sidebar" class="hidden md:block md:w-1/4 bg-white p-4 rounded-xl shadow-lg h-fit sticky top-6"></aside>
    <main id="content" class="md:w-3/4"></main>
</div>

<nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-2xl flex justify-around h-16 z-50 md:hidden">
    <button class="nav-btn active" data-nav-view="home"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg><span class="mt-1">Home</span></button>
    <button class="nav-btn" data-nav-view="categories"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path></svg><span class="mt-1">Deals</span></button>
    <button class="nav-btn" data-nav-view="blogs"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.206 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.806 18 7.5 18s3.332.477 4.5 1.247m0-13C13.168 5.477 14.806 5 16.5 5s3.332.477 4.5 1.253v13C19.832 18.477 18.194 18 16.5 18s-3.332.477-4.5 1.247"></path></svg><span class="mt-1">Research</span></button>
</nav>

<footer class="hidden md:block max-w-6xl mx-auto mt-8 p-6 text-center text-gray-500 border-t border-gray-200">
    <p class="text-sm">We only recommend the cheapest value, regardless of commission. This is the <strong>Berlin Savers</strong> commitment.</p>
    <p class="text-xs mt-2">&copy; 2025 Berlin Savers. The Essential Guide.</p>
</footer>

<script>
const dealsData = {
    gyms: [
        { id: 'g1', name: 'GYM10 Fitness Center', price: '€14.90/Month', why: 'The absolute cheapest price with 24/7 access.', logo: 'https://placehold.co/60x60/FF8C00/FFFFFF?text=G10', rating: 4.2, description: 'VERIFIED DEAL: This is the baseline price leader in Berlin. Ultra-minimalist, 24/7 fitness center focused purely on core equipment (weights, cardio). Perfect for the focused budget saver.', websiteLink: 'https://www.gym10.de', mapsQuery: 'GYM10 Fitness Center Berlin' },
        { id: 'g2', name: 'Basic-Fit (Off-Peak)', price: '€19.99/Month', why: 'Access to multiple locations across Germany.', logo: 'https://placehold.co/60x60/00BFFF/111827?text=BF', rating: 4.5, description: 'Standard budget chain. Offers various memberships, including options for unlimited guest invites. Wide array of classes available. Excellent value for those who travel across the city.', websiteLink: 'https://www.basic-fit.com', mapsQuery: 'Basic-Fit Berlin Frankfurter Allee' },
        { id: 'g3', name: 'SuperFit (Student/Off-Peak)', price: '€24.90/Month', why: 'Higher quality equipment and more locations.', logo: 'https://placehold.co/60x60/FFD700/111827?text=SF', rating: 4.6, description: 'A small step up in quality and environment. The student or off-peak membership provides the best value, including access to some basic classes.', websiteLink: 'https://www.superfitness.de', mapsQuery: 'SuperFit Berlin' },
        { id: 'g4', name: 'Outdoor Fitness Park (Free)', price: '€0/Month', why: 'Completely free access to basic park equipment.', logo: 'https://placehold.co/60x60/4CAF50/FFFFFF?text=PARK', rating: 5.0, description: 'Not a traditional gym, but Berlin has excellent free outdoor Calisthenics and Fitness parks. Perfect for bodyweight training and running. Requires weatherproof motivation!', websiteLink: 'https://berlin.de/outdoor-sport', mapsQuery: 'Outdoor Fitness Park Berlin' },
        { id: 'g5', name: 'University Sports (Uni ID)', price: '€10/Semester', why: 'Unbeatable price for enrolled university students.', logo: 'https://placehold.co/60x60/1E90FF/FFFFFF?text=US', rating: 4.8, description: 'Requires a valid Uni ID. Access to numerous sports and courses, including swimming pools and advanced training facilities.', websiteLink: 'https://sport.hu-berlin.de/angebot', mapsQuery: 'Humboldt Universität Sportzentrum' },
    ],
    driving_schools: [
        { id: 'd1', name: 'DriveEasy Berlin', price: '€1,200 Total', why: 'Lowest mandatory hours package price.', logo: 'https://placehold.co/60x60/FF8C00/FFFFFF?text=DE', rating: 4.6, description: 'Verified deal for the cheapest full driving license package including mandatory hours, theory, and exams. This is the entry-level price for category B in Berlin.', websiteLink: 'https://www.fahrschule-berlin.de', mapsQuery: 'DriveEasy Fahrscule Berlin Mitte' },
        { id: 'd2', name: 'TurboFührerschein', price: '€1,500 Total', why: 'Fast-track option with high pass rate guarantee.', logo: 'https://placehold.co/60x60/00BFFF/111827?text=TF', rating: 4.8, description: 'Premium package that includes extra practice hours and two retakes for the theory exam. Excellent for students needing to pass quickly.', websiteLink: 'https://www.turbofuehrerschein.de', mapsQuery: 'TurboFührerschein Berlin Kreuzberg' },
        { id: 'd3', name: 'The Weekend Driver', price: '€60/Lesson', why: 'Flexible pay-per-hour without high upfront costs.', logo: 'https://placehold.co/60x60/4B0082/FFFFFF?text=WK', rating: 4.3, description: 'Great for people who already know how to drive but just need the mandatory hours and official paperwork.', websiteLink: 'https://www.fahrschule-spandau.de', mapsQuery: 'Weekend Driver School Spandau' },
        { id: 'd4', name: 'Motorrad Schule Berlin', price: '€800 Total', why: 'Cheapest package for A1/A2 motorcycle licenses.', logo: 'https://placehold.co/60x60/800000/FFFFFF?text=MS', rating: 4.7, description: 'The cheapest way to get a motorcycle license. Package includes basic riding gear rental for the lessons.', websiteLink: 'https://www.motorrad-schule-berlin.de', mapsQuery: 'Motorrad Schule Berlin' },
    ],
    restaurants: [
        { id: 'r1', name: 'Mensa Lunch Deal (Student ID Required)', price: '€3.80/Meal', why: 'The absolute cheapest hot meal in Berlin.', logo: 'https://placehold.co/60x60/4CAF50/FFFFFF?text=MENSA', rating: 4.8, description: 'Requires a valid student ID. Offers a rotating menu of subsidized, healthy meals. Best value for calories per Euro in the city.', websiteLink: 'https://stw.berlin/mensa', mapsQuery: 'Mensa TU Berlin' },
        { id: 'r2', name: 'Döner Imbiss (Standard Kebab)', price: '€5.50/Kebab', why: 'Reliable, filling, and found everywhere.', logo: 'https://placehold.co/60x60/333333/FFFFFF?text=DONER', rating: 4.0, description: 'The Berlin staple. Price is for a standard chicken or beef Döner Kebab without extras.', websiteLink: null, mapsQuery: 'Hasir Döner Berlin' },
        { id: 'r3', name: 'Asia Imbiss (Weekly Special)', price: '€4.90/Meal', why: 'Cheap wok/noodle dishes for a filling lunch.', logo: 'https://placehold.co/60x60/FFD700/333333?text=ASIA', rating: 4.1, description: 'Look for the "Mittagsangebot" (Lunch Special) sign. Usually available from 11:30 to 2 PM.', websiteLink: null, mapsQuery: 'Vietnamese Imbiss Berlin Prenzlauer Berg' },
        { id: 'r4', name: 'Bakery Surplus (After 6 PM)', price: '50% Off', why: 'High-quality bread and pastries for half the price.', logo: 'https://placehold.co/60x60/A0522D/FFFFFF?text=BÄCKER', rating: 4.5, description: 'Many local bakeries sell leftover items at a steep discount just before closing time.', websiteLink: null, mapsQuery: 'Bäckerei in Berlin' },
    ],
    beauty_salons: [
        { id: 'b1', name: 'DIY Hair Cut Kit (Budget)', price: '€8.00/Kit', why: 'Cheapest method for basic trims at home.', logo: 'https://placehold.co/60x60/F44336/FFFFFF?text=DIY', rating: 3.5, description: 'A basic kit of scissors and trimmer oil. Requires a friend or steady hand.', websiteLink: 'https://www.amazon.de', mapsQuery: null },
        { id: 'b2', name: 'Trainee Salon Appointment', price: '€15.00/Cut', why: 'Professional quality supervised by experts.', logo: 'https://placehold.co/60x60/E91E63/FFFFFF?text=TRAINEE', rating: 4.2, description: 'Book a session with a supervised apprentice stylist. Takes longer but offers significant savings.', websiteLink: 'https://www.friseur-akademie-berlin.de', mapsQuery: 'Berliner Friseurakademie' },
        { id: 'b3', name: 'Nail Studio (Acrylic Refill)', price: '€25.00', why: 'Lowest price for a simple acrylic refill.', logo: 'https://placehold.co/60x60/FF69B4/FFFFFF?text=NAIL', rating: 3.8, description: 'Many budget-focused nail studios offer a simple acrylic refill without complex designs at this price point.', websiteLink: null, mapsQuery: 'Nail Studio Berlin Neukölln' },
        { id: 'b4', name: 'Student Massage (Therapy School)', price: '€20.00/Hour', why: 'Relaxing, high-quality massage performed by students.', logo: 'https://placehold.co/60x60/4682B4/FFFFFF?text=MASSAGE', rating: 4.7, description: 'Therapy schools offer supervised sessions. Excellent value for a therapeutic or relaxing massage.', websiteLink: 'https://www.physiotherapie-berlin.de', mapsQuery: 'Physiotherapie Schule Berlin' },
    ],
    rentals: [
        { id: 'l1', name: 'WG Zimmer (Shared Room)', price: '€350/Month', why: 'Lowest entry price for central Berlin accommodation.', logo: 'https://placehold.co/60x60/00BCD4/FFFFFF?text=WG', rating: 4.1, description: 'A single room in a shared apartment (Wohngemeinschaft). Finding a good WG is key to saving on rent.', websiteLink: 'https://wg-gesucht.de/berlin', mapsQuery: null },
        { id: 'l2', name: 'Temporary Housing (Student Dorm)', price: '€290/Month', why: 'Best subsidized pricing for students only.', logo: 'https://placehold.co/60x60/03A9F4/FFFFFF?text=DORM', rating: 4.5, description: 'Available only to enrolled university students. Long waiting lists, but the price is unbeatable for fully furnished housing.', websiteLink: 'https://stw.berlin/wohnheim', mapsQuery: 'Studentenwerk Berlin' },
        { id: 'l3', name: 'Micro-Apartment (20m²)', price: '€450/Month', why: 'Cheapest independent living unit (non-subsidized).', logo: 'https://placehold.co/60x60/FFD700/111827?text=MICRO', rating: 3.9, description: 'Small, fully furnished apartments managed by large companies. Great for short-term stays (3-6 months).', websiteLink: 'https://www.immowelt.de', mapsQuery: null },
        { id: 'l4', name: 'Sublet (Zwischenmiete)', price: '€300/Month', why: 'Bargain price for short, 1-3 month stays.', logo: 'https://placehold.co/60x60/FF8C00/FFFFFF?text=SUB', rating: 4.3, description: 'Taking over someone else\'s lease while they are away. Prices are often lower but availability is random.', websiteLink: 'https://wg-gesucht.de/berlin-zwischenmiete', mapsQuery: null },
        { id: 'l5', name: 'House Sitting/Pet Sitting', price: '€0/Month', why: 'Completely free accommodation in exchange for care work.', logo: 'https://placehold.co/60x60/8B4513/FFFFFF?text=PET', rating: 4.9, description: 'Requires background checks and trust, but can provide free accommodation in nice neighborhoods.', websiteLink: 'https://trustedhousesitters.com/berlin', mapsQuery: null },
    ],
    used_phones: [
        { id: 'u1', name: 'Refurbished iPhone SE (2020)', price: '€180 Total', why: 'Reliable, compact iOS experience for under €200.', logo: 'https://placehold.co/60x60/AAAAAA/FFFFFF?text=R', rating: 4.7, description: 'From a verified German refurbisher with a 12-month warranty. Excellent battery life and performance.', websiteLink: 'https://www.rebuy.de', mapsQuery: null },
        { id: 'u2', name: 'Used Android A-Series', price: '€120 Total', why: 'Best battery and basic functionality for lowest price.', logo: 'https://placehold.co/60x60/000000/FFFFFF?text=AA', rating: 4.1, description: 'A used, unlocked entry-level Android phone. Perfect for calls, texts, and basic web use.', websiteLink: 'https://www.ebay-kleinanzeigen.de', mapsQuery: null },
        { id: 'u3', name: 'New Nokia 105 (Basic Phone)', price: '€25 Total', why: 'The lowest price for a brand-new device (no apps/internet).', logo: 'https://placehold.co/60x60/00BFFF/FFFFFF?text=NOKIA', rating: 5.0, description: 'A classic "dumb phone" perfect for emergencies, basic calls, and excellent battery life.', websiteLink: 'https://www.amazon.de', mapsQuery: null },
        { id: 'u4', name: 'Local Shop Repair/Buyback', price: 'Varies (Low)', why: 'Best trade-in value or highly discounted older models.', logo: 'https://placehold.co/60x60/8B0000/FFFFFF?text=REPAIR', rating: 4.3, description: 'Local repair shops often sell fixed phones cheaply. Always check the seller\'s warranty.', websiteLink: null, mapsQuery: 'Handy Reparatur Berlin' },
    ],
    barbers: [
        { id: 'br1', name: 'Basic Barbershop Cut (No Wash)', price: '€12.00/Cut', why: 'Quick, efficient, no-frills haircut.', logo: 'https://placehold.co/60x60/607D8B/FFFFFF?text=BARBER', rating: 4.0, description: 'Found primarily in Turkish or Arabic districts. High skill level for classic styles, cash-only.', websiteLink: null, mapsQuery: 'Barber Shop Neukölln' },
        { id: 'br2', name: 'Hair School Model', price: '€5.00/Cut', why: 'Almost free haircut (requires patience).', logo: 'https://placehold.co/60x60/9E9E9E/FFFFFF?text=MODEL', rating: 3.9, description: 'Requires you to volunteer as a model for a final-year trainee. The cheapest option available.', websiteLink: 'https://www.friseur-schule-berlin.de', mapsQuery: 'Berlin Hair School' },
        { id: 'br3', name: 'Hair Trimmer Purchase', price: '€20 Total', why: 'Unlimited, free haircuts forever (DIY).', logo: 'https://placehold.co/60x60/00BFFF/111827?text=TRIM', rating: 4.5, description: 'A one-time investment in a decent hair/beard trimmer pays off instantly.', websiteLink: 'https://www.amazon.de', mapsQuery: null },
        { id: 'br4', name: 'Basic Women\'s Haircut (Discount Salon)', price: '€25.00/Cut', why: 'Cheapest standard cut for longer hair.', logo: 'https://placehold.co/60x60/FF8C00/FFFFFF?text=SALON', rating: 3.7, description: 'Focuses on volume-driven budget chains. Skip the wash and blow-dry to save extra.', websiteLink: 'https://www.friseur-berlin.de', mapsQuery: 'Discount Salon Berlin' },
    ],
    phone_plans: [
        { id: 'p1', name: 'fraenk (Telekom)', price: '€10/Month (15GB)', why: 'Premium Telekom network quality at a budget price.', logo: 'https://placehold.co/60x60/FF8C00/FFFFFF?text=F', rating: 4.9, description: '15 GB data + Allnet Flat. Simple, easy to manage via app, and uses the best network (Telekom). EU roaming included.', websiteLink: 'https://www.fraenk.de', mapsQuery: null },
        { id: 'p2', name: 'SIMon mobile (Vodafone)', price: '€11.99/Month (20GB)', why: 'Highest data volume for under €12 on the Vodafone network.', logo: 'https://placehold.co/60x60/00BFFF/111827?text=SIM', rating: 4.3, description: '20 GB data + Allnet Flat. Flexible postpaid contract you can cancel every month.', websiteLink: 'https://www.simon-mobile.de', mapsQuery: null },
        { id: 'p3', name: 'Lidl Connect Prepaid', price: '€7.99/4 Weeks (10GB)', why: 'Cheapest option for low-commitment prepaid data.', logo: 'https://placehold.co/60x60/800080/FFFFFF?text=L', rating: 4.0, description: 'Uses the Vodafone network. Excellent for people who don\'t need 24/7 coverage.', websiteLink: 'https://www.lidl-connect.de', mapsQuery: null },
        { id: 'p4', name: 'Congstar Prepaid (Telekom)', price: '€10/Month (5GB)', why: 'Telekom quality for low data users (monthly top-up).', logo: 'https://placehold.co/60x60/FFD700/111827?text=C', rating: 4.7, description: 'The best prepaid option on the premium Telekom network. Ideal for light users.', websiteLink: 'https://www.congstar.de', mapsQuery: null },
        { id: 'p5', name: 'OTELO (Vodafone)', price: '€14.99/Month (30GB)', why: 'Massive data volume if speed is not the absolute priority.', logo: 'https://placehold.co/60x60/4B0082/FFFFFF?text=O', rating: 4.1, description: 'A simple, no-frills contract with huge data. Perfect for tethering or streaming frequently.', websiteLink: 'https://www.otelo.de', mapsQuery: null },
    ],
    grocery_discounts: [
        { id: 'gr1', name: 'Lidl App Coupons', price: 'Up to 25% Off', why: 'Consistent weekly savings on staples and produce.', logo: 'https://placehold.co/60x60/00BFFF/FFFFFF?text=LIDL', rating: 4.9, description: 'Must download and activate coupons in the app before checkout. Always features discounts on meat and vegetables.', websiteLink: 'https://www.lidl.de', mapsQuery: null },
        { id: 'gr2', name: 'Too Good To Go App (Surprise Box)', price: '€4.00/Box', why: 'Get high-quality, surplus food at 70% discount.', logo: 'https://placehold.co/60x60/8BC34A/FFFFFF?text=TGTG', rating: 4.5, description: 'Purchase a "magic box" from bakeries or grocery stores at closing time.', websiteLink: 'https://toogoodtogo.com/en/app', mapsQuery: 'Too Good To Go Berlin Pickups' },
        { id: 'gr3', name: 'Aldi Süd/Nord Weekly Deals', price: 'Varies', why: 'Best pricing for high-quality seasonal produce.', logo: 'https://placehold.co/60x60/006400/FFFFFF?text=ALDI', rating: 4.7, description: 'Check the weekly flyer for "Aktionsware" (promotion items). Deals change every Monday.', websiteLink: 'https://aldi-sued.de/angebote', mapsQuery: 'Aldi Berlin' },
        { id: 'gr4', name: 'Food Sharing (Free)', price: '€0/Food', why: 'Free surplus food (requires registration).', logo: 'https://placehold.co/60x60/FFA500/FFFFFF?text=FREE', rating: 4.6, description: 'Join local Food Sharing initiatives to collect food that would otherwise be thrown away.', websiteLink: 'https://foodsharing.de/berlin', mapsQuery: 'Food Sharing Hub Berlin' },
    ],
    clothes_deals: [
        { id: 'c1', name: 'Charity Shop/Second Hand (Bulk)', price: '€3.00/Item Avg.', why: 'Lowest price for wearable, quality clothes.', logo: 'https://placehold.co/60x60/800080/FFFFFF?text=USED', rating: 4.4, description: 'Visit specific kilo-shops or local Red Cross shops on discount days.', websiteLink: 'https://www.humana.org', mapsQuery: 'Humana Second Hand & Vintage Berlin' },
        { id: 'c2', name: 'Online Outlet (End-of-Season)', price: 'Up to 70% Off', why: 'New clothes at used prices from major retailers.', logo: 'https://placehold.co/60x60/FF5722/FFFFFF?text=OUTLET', rating: 4.2, description: 'Sign up for newsletters from major European online outlets for end-of-season sales.', websiteLink: 'https://www.zalando-lounge.de', mapsQuery: null },
        { id: 'c3', name: 'Vinted/Ebay Kleinanzeigen', price: 'Varies (Very Low)', why: 'Direct peer-to-peer buying for specific items.', logo: 'https://placehold.co/60x60/00BFFF/111827?text=P2P', rating: 4.0, description: 'Ideal for finding specific brand items or sizes cheaply.', websiteLink: 'https://vinted.de/berlin', mapsQuery: null },
        { id: 'c4', name: 'Swap Parties (Kleidertausch)', price: '€0/Item', why: 'Free, sustainable clothes replacement.', logo: 'https://placehold.co/60x60/9ACD32/FFFFFF?text=SWAP', rating: 4.8, description: 'Attend local clothes-swapping events. Bring items you don\'t want and take home new ones for free.', websiteLink: 'https://kleidertausch-berlin.de', mapsQuery: 'Kleidertausch Berlin' },
    ]
};

function getSavedKeys(){ try { return JSON.parse(localStorage.getItem('savedDeals')||'[]'); } catch(e) { return []; } }
function saveSavedKeys(arr){ localStorage.setItem('savedDeals', JSON.stringify(arr)); }
function isSaved(key){ return getSavedKeys().includes(key); }
function toggleSaved(category, id){
    const key = `${category}|${id}`;
    const saved = getSavedKeys();
    const idx = saved.indexOf(key);
    if(idx >= 0){ saved.splice(idx,1); } else { saved.push(key); }
    saveSavedKeys(saved);
    document.querySelectorAll(`[data-save-key="${key}"]`).forEach(el => el.classList.toggle('saved', idx<0));
}
function renderSaveButton(category, id){
    const key = `${category}|${id}`;
    const cls = isSaved(key) ? 'heart saved' : 'heart';
    return `<span class="${cls}" role="button" data-save-key="${key}" onclick="toggleSaved('${category}','${id}')" style="margin-left:8px;">♥</span>`;
}

function getTitleFromKey(key){ return key.replace(/_/g,' ').split(' ').map(w=>w.charAt(0).toUpperCase()+w.slice(1)).join(' '); }
function updateSEO(title, desc){ document.title = title + ' – Berlin Savers'; const md=document.querySelector('meta[name="description"]'); if(md) md.setAttribute('content',desc); }
function renderRating(rating){ return `<span class="text-star-color">${'★'.repeat(Math.round(rating))}${'☆'.repeat(5-Math.round(rating))}</span>`; }

function renderAdmin(){
    updateSEO('Admin Dashboard','Manage products, pricing, and deals');
    let html = `<h2 class="text-3xl font-extrabold text-secondary mb-6">Admin Dashboard</h2>`;
    html += `<div class="bg-orange-100 border-l-4 border-primary p-4 mb-6 rounded"><p class="text-sm text-secondary"><strong>Note:</strong> Changes are saved to browser storage. To persist permanently, export data regularly.</p></div>`;
    
    // Category selector
    html += `<div class="mb-6"><label class="block text-lg font-bold text-secondary mb-3">Select Category:</label>`;
    html += `<select id="admin-category" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"><option value="">-- Choose Category --</option>`;
    Object.keys(dealsData).forEach(key=>{ html += `<option value="${key}">${getTitleFromKey(key)}</option>`; });
    html += `</select></div>`;
    
    // Deals table for selected category
    html += `<div id="admin-deals-table" class="bg-white rounded-lg shadow-lg p-6 mb-6"></div>`;
    
    // Add new deal form
    html += `<div class="bg-white rounded-lg shadow-lg p-6 mb-6"><h3 class="text-xl font-bold text-secondary mb-4">Add New Deal</h3>`;
    html += `<form id="admin-add-form"><div class="grid grid-cols-1 sm:grid-cols-2 gap-4">`;
    html += `<input type="text" id="new-id" placeholder="Deal ID (e.g., g6)" class="px-4 py-2 border rounded" required>`;
    html += `<input type="text" id="new-name" placeholder="Name" class="px-4 py-2 border rounded" required>`;
    html += `<input type="text" id="new-price" placeholder="Price (e.g., €10/Month)" class="px-4 py-2 border rounded" required>`;
    html += `<input type="text" id="new-why" placeholder="Why (one-line value prop)" class="px-4 py-2 border rounded" required>`;
    html += `<input type="number" id="new-rating" placeholder="Rating (0-5)" min="0" max="5" step="0.1" class="px-4 py-2 border rounded">`;
    html += `<input type="url" id="new-website" placeholder="Website (optional)" class="px-4 py-2 border rounded">`;
    html += `<textarea id="new-description" placeholder="Description" class="px-4 py-2 border rounded col-span-1 sm:col-span-2"></textarea>`;
    html += `<input type="text" id="new-maps" placeholder="Maps Query (optional)" class="px-4 py-2 border rounded col-span-1 sm:col-span-2">`;
    html += `<button type="submit" class="col-span-1 sm:col-span-2 bg-primary text-white px-6 py-3 rounded font-bold hover:bg-primary-dark transition">Add Deal</button>`;
    html += `</div></form></div>`;
    
    document.getElementById('content').innerHTML = html;
    
    // Event listeners for admin
    const categorySelect = document.getElementById('admin-category');
    categorySelect.addEventListener('change', ()=>renderAdminTable(categorySelect.value));
    
    const addForm = document.getElementById('admin-add-form');
    addForm.addEventListener('submit', (e)=>{
        e.preventDefault();
        const category = categorySelect.value;
        if(!category) { alert('Please select a category'); return; }
        const newDeal = {
            id: document.getElementById('new-id').value,
            name: document.getElementById('new-name').value,
            price: document.getElementById('new-price').value,
            why: document.getElementById('new-why').value,
            logo: 'https://placehold.co/60x60/FF8C00/FFFFFF?text=NEW',
            rating: parseFloat(document.getElementById('new-rating').value) || 4,
            description: document.getElementById('new-description').value,
            websiteLink: document.getElementById('new-website').value || null,
            mapsQuery: document.getElementById('new-maps').value || null
        };
        dealsData[category].push(newDeal);
        alert('Deal added successfully');
        addForm.reset();
        renderAdminTable(category);
    });
}

function renderAdminTable(category){
    if(!category) return;
    let html = `<h3 class="text-2xl font-bold text-secondary mb-4">${getTitleFromKey(category)} - ${dealsData[category].length} deals</h3>`;
    html += `<div class="overflow-x-auto"><table class="w-full border-collapse"><thead><tr class="bg-gray-100"><th class="border p-2 text-left">ID</th><th class="border p-2 text-left">Name</th><th class="border p-2 text-left">Price</th><th class="border p-2 text-left">Rating</th><th class="border p-2 text-center">Actions</th></tr></thead><tbody>`;
    dealsData[category].forEach(deal=>{
        html += `<tr class="hover:bg-gray-50"><td class="border p-2">${deal.id}</td><td class="border p-2">${deal.name}</td><td class="border p-2">${deal.price}</td><td class="border p-2">${deal.rating}</td><td class="border p-2 text-center"><button class="edit-deal bg-logo-blue text-white px-3 py-1 rounded mr-2" data-cat="${category}" data-id="${deal.id}">Edit</button><button class="delete-deal bg-red-500 text-white px-3 py-1 rounded" data-cat="${category}" data-id="${deal.id}">Delete</button></td></tr>`;
    });
    html += `</tbody></table></div>`;
    
    document.getElementById('admin-deals-table').innerHTML = html;
    
    // Edit/Delete handlers
    document.querySelectorAll('.edit-deal').forEach(btn=>btn.addEventListener('click', ()=>{
        const cat = btn.getAttribute('data-cat');
        const id = btn.getAttribute('data-id');
        const deal = dealsData[cat].find(d=>d.id===id);
        if(!deal) return;
        const newName = prompt('New name:', deal.name);
        if(newName) deal.name = newName;
        const newPrice = prompt('New price:', deal.price);
        if(newPrice) deal.price = newPrice;
        const newRating = prompt('New rating:', deal.rating);
        if(newRating) deal.rating = parseFloat(newRating);
        const newWhy = prompt('New why:', deal.why);
        if(newWhy) deal.why = newWhy;
        alert('Deal updated');
        renderAdminTable(cat);
    }));
    
    document.querySelectorAll('.delete-deal').forEach(btn=>btn.addEventListener('click', ()=>{
        const cat = btn.getAttribute('data-cat');
        const id = btn.getAttribute('data-id');
        if(confirm(`Delete "${dealsData[cat].find(d=>d.id===id)?.name}"?`)){
            dealsData[cat] = dealsData[cat].filter(d=>d.id!==id);
            alert('Deal deleted');
            renderAdminTable(cat);
        }
    }));
}

function renderHome(){ 
    updateSEO('Home','Your essential guide to the cheapest, verified services in Berlin.');
    let html=`<h2 class="text-3xl font-extrabold text-secondary mb-6">Top Saver Categories</h2><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">`;
    Object.keys(dealsData).forEach(key=>{
        const title=getTitleFromKey(key);
        const count = dealsData[key].length;
        const cheapest = dealsData[key][0].price;
        html+=`<a href="#listing/${key}" class="deal-card-hover block bg-white p-6 rounded-xl shadow-md border-t-4 border-primary hover:shadow-xl transition-all duration-300"><div class="flex items-center justify-between mb-4"><h3 class="text-xl font-bold text-secondary">${title}</h3><span class="text-xs font-semibold text-white bg-logo-blue px-3 py-1 rounded-full">${count} Deals</span></div><p class="text-gray-500 mb-3 text-sm">Find the best value for ${title.toLowerCase()}.</p><div class="text-2xl font-black text-primary">${cheapest}</div><span class="text-xs text-gray-400 mt-1 block">Starting from this price</span></a>`
    });
    html+='</div>';
    document.getElementById('content').innerHTML=html;
}

function renderListing(categoryKey){
    const categoryDeals = dealsData[categoryKey];
    const categoryTitle = getTitleFromKey(categoryKey);
    if(!categoryDeals){ document.getElementById('content').innerHTML=`<div class="p-8 text-center text-gray-500">Category not found. <a href="#home" class="text-logo-blue font-semibold">Go Home</a></div>`; return; }
    updateSEO(categoryTitle, `The cheapest and best value deals for ${categoryTitle.toLowerCase()} in Berlin.`);
    let html=`<h2 class="text-3xl font-extrabold text-secondary mb-2">${categoryTitle} Deals</h2><p class="text-lg text-gray-600 mb-8">Top ${categoryDeals.length} options ranked by verified value.</p><div class="space-y-6">`;
    categoryDeals.forEach(deal=>{
        html+=`<div class="deal-card-hover flex flex-col md:flex-row bg-white p-4 sm:p-6 rounded-xl shadow-md border-l-8 border-primary hover:border-logo-blue transition-all duration-300 cursor-pointer"><div class="flex-grow"><div class="flex items-start mb-3"><img src="${deal.logo}" alt="${deal.name} Logo" class="w-12 h-12 rounded-full mr-4 shadow-inner flex-shrink-0"><div><h3 class="text-xl font-bold text-secondary flex items-center">${deal.name} ${renderSaveButton(categoryKey,deal.id)}</h3><p class="text-sm text-primary font-semibold">${deal.why}</p></div></div><p class="text-gray-700 text-sm deal-description">${deal.description}</p></div><div class="flex-shrink-0 mt-4 md:mt-0 md:ml-6 flex md:flex-col items-center md:items-end justify-between border-t md:border-t-0 md:border-l pt-3 md:pl-6"><div class="text-right"><div class="text-3xl font-black text-primary leading-none">${deal.price}</div><div class="text-xs text-gray-500">Monthly/Total Cost</div></div><a href="#detail/${categoryKey}/${deal.id}" data-route="detail/${categoryKey}/${deal.id}" class="bg-logo-blue text-white text-sm font-semibold px-4 py-2 rounded-full mt-3 hover:bg-blue-400 transition duration-150 shadow-md inline-block text-center">View Details &rarr;</a></div></div>`
    });
    html += '</div>';
    document.getElementById('content').innerHTML = html;
}

function renderDetail(categoryKey, dealId){
    const deal = dealsData[categoryKey]?.find(d=>d.id===dealId);
    if(!deal){ document.getElementById('content').innerHTML=`<div class="p-8 text-center text-gray-500">Deal not found. <a href="#home" class="text-logo-blue font-semibold">Go Home</a></div>`; return; }
    updateSEO(deal.name, `${deal.price} deal at ${deal.name}. ${deal.why}`);
    let html = `<div class="bg-white p-6 md:p-10 rounded-xl shadow-2xl"><a href="#listing/${categoryKey}" class="inline-flex items-center text-logo-blue hover:text-primary transition duration-150 mb-6">← Back to ${getTitleFromKey(categoryKey)} List</a><div class="flex items-center mb-6 border-b pb-4"><img src="${deal.logo}" class="w-20 h-20 rounded-full mr-6 shadow-xl flex-shrink-0"><div><h1 class="text-4xl font-extrabold text-secondary flex items-center">${deal.name} ${renderSaveButton(categoryKey,deal.id)}</h1><p class="text-lg text-primary font-semibold mt-1">${deal.why}</p></div></div><div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"><div class="p-4 bg-background rounded-lg border-l-4 border-primary"><span class="text-sm text-gray-500 font-medium">Verified Price</span><div class="text-3xl font-black text-secondary">${deal.price}</div></div><div class="p-4 bg-background rounded-lg border-l-4 border-logo-blue"><span class="text-sm text-gray-500 font-medium">User Rating</span><div class="flex items-center mt-1">${renderRating(deal.rating)} <span class="ml-2 text-xl font-bold text-secondary">${deal.rating}</span></div></div><div class="p-4 bg-background rounded-lg border-l-4 border-primary-dark"><span class="text-sm text-gray-500 font-medium">Saver Score</span><div class="text-3xl font-black text-secondary">${(deal.rating * 2.1).toFixed(1)}/10</div></div></div><h2 class="text-2xl font-bold text-secondary mb-3">Full Deal Breakdown</h2><p class="text-gray-700 leading-relaxed mb-8 border-b pb-6">${deal.description}</p><div class="flex flex-col sm:flex-row gap-4">${deal.websiteLink ? `<a href="${deal.websiteLink}" target="_blank" class="flex-1 bg-primary text-white text-center px-6 py-3 rounded-full font-bold hover:bg-primary-dark transition duration-200 shadow-lg">Visit Official Website &rarr;</a>` : `<div class="flex-1 bg-gray-100 text-gray-500 text-center px-6 py-3 rounded-full font-bold">No Website</div>`} ${deal.mapsQuery ? `<a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(deal.mapsQuery)}" target="_blank" class="flex-1 border border-logo-blue text-logo-blue text-center px-6 py-3 rounded-full font-bold hover:bg-logo-blue hover:text-white transition duration-200 shadow-md">Find on Google Maps</a>` : ''} <button onclick="window.history.back()" class="flex-1 bg-gray-200 text-secondary text-center px-6 py-3 rounded-full font-bold hover:bg-gray-300 transition duration-200 shadow-md">Go Back</button></div></div>`;
    document.getElementById('content').innerHTML = html;
}

function renderSavedView(){
    updateSEO('Saved Deals', 'Your saved deals');
    const saved = getSavedKeys();
    if(saved.length===0){ document.getElementById('content').innerHTML = `<div class="p-8 text-center text-gray-500"><h2 class="text-2xl font-bold mb-4">No saved places yet</h2><p class="mb-4">Click the heart (♥) on any deal to save it for later!</p><a href="#home" class="text-logo-blue font-semibold">Browse deals</a></div>`; return; }
    let html = '<h2 class="text-3xl font-extrabold text-secondary mb-6">Saved Places</h2><div class="space-y-6">';
    saved.forEach(k => {
        const [cat,id] = k.split('|');
        const deal = dealsData[cat]?.find(d=>d.id===id);
        if(!deal) return;
        html += `<a href="#detail/${cat}/${deal.id}" class="deal-card-hover flex flex-col md:flex-row bg-white p-4 sm:p-6 rounded-xl shadow-md border-l-4 border-primary"><img src="${deal.logo}" class="w-12 h-12 rounded-full mr-4 mb-3 md:mb-0"><div class="flex-1"><h3 class="text-lg font-bold text-secondary">${deal.name}</h3><div class="text-sm text-gray-600 mb-2">${deal.why}</div><p class="text-xs text-gray-500 deal-description">${deal.description}</p></div><div class="ml-4 text-primary font-black text-lg">${deal.price}</div></a>`;
    });
    html += '</div>';
    document.getElementById('content').innerHTML = html;
}

function renderBlogs(){ 
    updateSEO('Research & Reviews','In-depth articles and verified reviews.'); 
    let html = '<h2 class="text-3xl font-extrabold text-secondary mb-6">Research & Reviews</h2><div class="space-y-6">';
    const blogsData = [
        { id: 'b1', title: 'The €15 Fitness Question: Is GYM10 Worth It in 2025?', summary: 'After months of testing, we confirm that GYM10 remains the undefeated champion of price.', date: 'Oct 28, 2025', content: '<h3 class="text-xl font-bold mt-4 mb-2">The Good: Unbeatable Price and Access</h3><p>The main draw is the price. For less than the price of two Döner Kebabs, you get 24/7 access to basic but functional weight and cardio equipment.</p><h3 class="text-xl font-bold mt-4 mb-2">The Bad: Crowd and Amenities</h3><p>The catch is simple: everyone else knows the price, too. Expect peak hours (5 PM - 8 PM) to be extremely crowded. Amenities are almost non-existent.</p><h3 class="text-xl font-bold mt-4 mb-2">Contract Pitfalls to Avoid</h3><p>Always read the fine print. Most budget gyms offer the headline price only if you sign a 12 or 24-month contract. They often have high activation fees and mandatory yearly service fees.</p><p class="mt-4 font-bold text-primary">Verdict: GYM10 is worth it only if you are highly disciplined and value saving every Euro.</p>' },
        { id: 'b2', title: 'Best Phone Plan for under €20: High Data Value', summary: 'Need 5G and more than 10GB of data without a two-year contract? Fraenk and SIMon mobile are battling for the top spot.', date: 'Oct 20, 2025', content: '<h3 class="text-xl font-bold mt-4 mb-2">The Gold Standard: fraenk (€10/Month, 15GB)</h3><p>Fraenk operates on the Telekom network, widely considered the fastest and most reliable in Germany. It\'s an all-digital offering: no paper bills, everything managed via app.</p><h3 class="text-xl font-bold mt-4 mb-2">The Data King: SIMon mobile (€11.99/Month, 20GB)</h3><p>If you consume a lot of media, SIMon (Vodafone network) offers 20GB for a very small premium. The key feature is monthly cancelation option, offering supreme flexibility.</p><h3 class="text-xl font-bold mt-4 mb-2">How to Switch and Save</h3><p>Switching is easy. You can usually take your old number with you. Download the new provider\'s app first to check network coverage in your specific Kiez (neighborhood).</p><p class="mt-4 font-bold text-primary">Winner: Fraenk wins due to superior Telekom network. For heavy users, SIMon mobile is the better ratio.</p>' }
    ];
    blogsData.forEach(blog => {
        html += `<a href="#blog/${blog.id}" class="deal-card-hover block bg-white p-6 rounded-xl shadow-md border-l-4 border-logo-blue hover:shadow-lg transition-all"><h3 class="text-lg font-bold text-secondary">${blog.title}</h3><p class="text-sm text-gray-500 mt-1 mb-2">Published: ${blog.date}</p><p class="text-gray-600 text-sm">${blog.summary}</p></a>`;
    });
    html += '</div>';
    document.getElementById('content').innerHTML = html;
}

function renderBlogDetail(blogId){
    const blogsData = [
        { id: 'b1', title: 'The €15 Fitness Question: Is GYM10 Worth It in 2025?', date: 'Oct 28, 2025', content: '<h3 class="text-xl font-bold mt-4 mb-2">The Good: Unbeatable Price and Access</h3><p>The main draw is the price. For less than the price of two Döner Kebabs, you get 24/7 access to basic but functional weight and cardio equipment.</p><h3 class="text-xl font-bold mt-4 mb-2">The Bad: Crowd and Amenities</h3><p>The catch is simple: everyone else knows the price, too. Expect peak hours (5 PM - 8 PM) to be extremely crowded. Amenities are almost non-existent.</p><h3 class="text-xl font-bold mt-4 mb-2">Contract Pitfalls to Avoid</h3><p>Always read the fine print. Most budget gyms offer the headline price only if you sign a 12 or 24-month contract. They often have high activation fees and mandatory yearly service fees.</p><p class="mt-4 font-bold text-primary">Verdict: GYM10 is worth it only if you are highly disciplined and value saving every Euro.</p>' },
        { id: 'b2', title: 'Best Phone Plan for under €20: High Data Value', date: 'Oct 20, 2025', content: '<h3 class="text-xl font-bold mt-4 mb-2">The Gold Standard: fraenk (€10/Month, 15GB)</h3><p>Fraenk operates on the Telekom network, widely considered the fastest and most reliable in Germany. It\'s an all-digital offering: no paper bills, everything managed via app.</p><h3 class="text-xl font-bold mt-4 mb-2">The Data King: SIMon mobile (€11.99/Month, 20GB)</h3><p>If you consume a lot of media, SIMon (Vodafone network) offers 20GB for a very small premium. The key feature is monthly cancelation option, offering supreme flexibility.</p><h3 class="text-xl font-bold mt-4 mb-2">How to Switch and Save</h3><p>Switching is easy. You can usually take your old number with you. Download the new provider\'s app first to check network coverage in your specific Kiez (neighborhood).</p><p class="mt-4 font-bold text-primary">Winner: Fraenk wins due to superior Telekom network. For heavy users, SIMon mobile is the better ratio.</p>' }
    ];
    const blog = blogsData.find(b => b.id === blogId);
    if(!blog){ document.getElementById('content').innerHTML = `<div class="p-8 text-center text-gray-500"><h2 class="text-2xl font-bold mb-4">Article not found</h2><p class="mb-4"><a href="#blogs" class="text-logo-blue font-semibold">Back to Articles</a></p></div>`; return; }
    updateSEO(blog.title, 'Read the full article on Berlin Savers');
    let html = `<div class="bg-white p-6 md:p-10 rounded-xl shadow-2xl"><a href="#blogs" class="inline-flex items-center text-logo-blue hover:text-primary transition duration-150 mb-6">← Back to Articles</a><h1 class="text-4xl font-extrabold text-secondary mb-2">${blog.title}</h1><p class="text-sm text-gray-500 mb-6 border-b pb-4">Published: ${blog.date}</p><div class="prose prose-sm max-w-none text-gray-700 leading-relaxed">${blog.content}</div></div>`;
    document.getElementById('content').innerHTML = html;
}

function renderFeaturedDeals(){ updateSEO('Featured Deals','The latest and greatest verified deals saving Berliners money.'); document.getElementById('content').innerHTML = `<div class="bg-white p-8 rounded-xl shadow-lg"><h3 class="text-xl font-bold mb-3">Current Highlight: Fraenk (Mobile Plan)</h3><p class="text-gray-700 mb-4">The fraenk deal remains the top pick for network quality vs. price. Get 15GB on the reliable Telekom network for just €10/month.</p><a href="#listing/phone_plans" class="text-logo-blue font-semibold hover:underline">View Phone Plans Category &rarr;</a></div>`; }

function renderSidebar(currentRoute){
    const sidebar = document.getElementById('sidebar');
    let html = '';
    html += `<h3 class="text-sm font-extrabold uppercase text-gray-400 mb-2">Quick Access</h3><nav class="mb-8"><a href="#saved" class="flex items-center p-3 rounded-xl border-l-4 border-primary text-secondary hover:bg-gray-100"><span class="text-2xl mr-3">♥</span><span class="text-lg leading-tight">Saved Places</span></a></nav>`;
    html += `<h3 class="text-lg font-bold text-secondary mb-3">Saving Categories</h3><nav class="space-y-1 mb-8">`;
    Object.keys(dealsData).forEach(key=>{
        const isActive = currentRoute === `listing/${key}` ? 'bg-logo-blue/10 text-logo-blue font-semibold' : 'text-gray-700 hover:bg-gray-100';
        html+=`<a href="#listing/${key}" class="block px-3 py-2 rounded-lg transition-colors duration-150 ${isActive}">${getTitleFromKey(key)}</a>`;
    });
    html += `</nav><h3 class="text-lg font-bold text-secondary mb-3 border-t pt-4">Research & Info</h3><nav class="space-y-1 mb-4"><a href="#featured" class="block px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100">Featured Deals</a></nav>`;
    html += `<nav class="border-t pt-4"><a href="#admin" class="block px-3 py-2 rounded-lg bg-primary text-white font-semibold hover:bg-primary-dark transition">⚙️ Admin Panel</a></nav>`;
    sidebar.innerHTML = html;
}

function router(){
    let hash = window.location.hash.slice(1);
    if(!hash||hash.startsWith('/')) hash='home';
    const segments=hash.split('/');
    const view=segments[0];
    const p1=segments[1];
    const p2=segments[2];
    document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
    if(view==='home'||view==='featured'){ document.querySelector('[data-nav-view="home"]').classList.add('active'); }
    else if(view==='listing'||view==='detail'){ document.querySelector('[data-nav-view="categories"]').classList.add('active'); }
    else if(view==='blogs'||view==='blog'){ document.querySelector('[data-nav-view="blogs"]').classList.add('active'); }
    renderSidebar(view==='listing'?`${view}/${p1}`:view);
    switch(view){
        case 'home': renderHome(); break;
        case 'listing': renderListing(p1); break;
        case 'detail': renderDetail(p1,p2); break;
        case 'featured': renderFeaturedDeals(); break;
        case 'blogs': renderBlogs(); break;
        case 'blog': renderBlogDetail(p1); break;
        case 'saved': renderSavedView(); break;
        case 'admin': renderAdmin(); break;
        default: renderHome(); break;
    }
    document.getElementById('content').scrollIntoView({behavior:'smooth'});
}

function setupEventListeners(){
    window.addEventListener('hashchange',router);
    const nav = document.querySelector('nav.fixed');
    if(nav) {
        // Immediate visual feedback for touch/pointer devices: set active on pointerdown with haptic feedback
        document.querySelectorAll('.nav-btn').forEach(btn=>{
            btn.addEventListener('pointerdown', ()=>{
                document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
                btn.classList.add('active');
                // Haptic feedback on tap (if available)
                if(navigator.vibrate) navigator.vibrate(10);
            });
        });
        nav.addEventListener('click',(event)=>{
            const target=event.target.closest('[data-nav-view]');
            if(target){
                const view=target.getAttribute('data-nav-view');
                const hash=(view==='categories'?'listing/gyms':view);
                window.location.hash=hash;
            }
        });
    }
    document.getElementById('content').addEventListener('click',(event)=>{
        const link=event.target.closest('[data-route]');
        if(link){
            const route=link.getAttribute('data-route');
            window.location.hash=route;
            event.preventDefault();
        }
    });
    document.querySelector('header a[data-route]')?.addEventListener('click',(event)=>{
        const route=event.currentTarget.getAttribute('data-route');
        window.location.hash=route;
        event.preventDefault();
    });
}

document.addEventListener('DOMContentLoaded',function(){ setupEventListeners(); router(); });
</script>
</body>
</html>
